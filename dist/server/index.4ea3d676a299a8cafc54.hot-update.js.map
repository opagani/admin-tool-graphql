{"version":3,"file":"index.4ea3d676a299a8cafc54.hot-update.js","sources":["webpack:///./app/graphql/Auth/resolvers.ts","webpack:///./app/graphql/Auth/schema.graphql","webpack:///./app/graphql/Auth/services/getAuth.ts","webpack:///./app/graphql/Auth/services/index.ts","webpack:///./app/graphql/index.ts","webpack:///./app/graphql/utils/api.ts"],"sourcesContent":["import type { ResolverFn } from '../../types/ResolversFn';\nimport type { Auth } from '../../../shared/generated-types/graphql';\nimport { authServices } from './services';\n\nexport type RentGuaranteeContext = {\n  token: { 'rent-guaranteeUserToken': string; 'rent-guaranteeSessionToken': string };\n};\n\nexport type AuthResolver<Query> = ResolverFn<Query, RentGuaranteeContext>;\n\nconst auth: AuthResolver<unknown> = async (\n  _parent: unknown,\n  _vars: unknown,\n  context: RentGuaranteeContext,\n): Promise<Auth | null | unknown> => {\n  return authServices.getAuth(\n    context?.token?.['rent-guaranteeUserToken'] || '',\n    context?.token?.['rent-guaranteeSessionToken'] || '',\n  );\n};\n\nconst authQueryResolvers = {\n  auth,\n};\n\nconst authResolvers = {\n  Query: authQueryResolvers,\n};\n\nexport default authResolvers;\n","\n    var doc = {\"kind\":\"Document\",\"definitions\":[{\"kind\":\"ObjectTypeDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"Auth\"},\"interfaces\":[],\"directives\":[],\"fields\":[{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"isLoggedIn\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Boolean\"}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"hasAccess\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Boolean\"}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"username\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}}},\"directives\":[]},{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"roles\"},\"arguments\":[],\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"ListType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}}}},\"directives\":[]}]},{\"kind\":\"ObjectTypeDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"Query\"},\"interfaces\":[],\"directives\":[],\"fields\":[{\"kind\":\"FieldDefinition\",\"name\":{\"kind\":\"Name\",\"value\":\"auth\"},\"arguments\":[],\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Auth\"}},\"directives\":[]}]}],\"loc\":{\"start\":0,\"end\":127}};\n    doc.loc.source = {\"body\":\"type Auth {\\n  isLoggedIn: Boolean!\\n  hasAccess: Boolean!\\n  username: String!\\n  roles: [String]!\\n}\\n\\ntype Query {\\n  auth: Auth\\n}\\n\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}};\n  \n\n    var names = {};\n    function unique(defs) {\n      return defs.filter(\n        function(def) {\n          if (def.kind !== 'FragmentDefinition') return true;\n          var name = def.name.value\n          if (names[name]) {\n            return false;\n          } else {\n            names[name] = true;\n            return true;\n          }\n        }\n      )\n    }\n  \n\n      module.exports = doc;\n    \n","import axios from 'axios';\nimport { api } from '../../utils/api';\nimport log from '../../../server/utils/log';\nimport { tracer } from '../../../server/utils/tracer';\nimport type { Auth } from '../../../../shared/generated-types/graphql';\n\nconst getAuth = async (rentGuaranteeUserToken: string, rentGuaranteeSessionToken: string): Promise<Auth | null> => {\n  const response = await axios\n    .get(`${api.gql.auth}`, {\n      headers: {\n        Cookie: `rent-guaranteeUserToken=${rentGuaranteeUserToken}; rent-guaranteeSessionToken=${rentGuaranteeSessionToken}`,\n      },\n    })\n    .then((res) => res.data.data)\n    .catch((err) => {\n      log.error(`Error fetching auth: ${err}`);\n      return null;\n    });\n\n  if (response) {\n    return response;\n  }\n\n  return null;\n};\n\nexport default tracer.wrap(getAuth);\n","import getAuth from './getAuth';\n\nexport const authServices = {\n  getAuth,\n};\n","//resolvers\nimport searchPoliciesResolvers from './SearchPolicies/resolvers';\nimport policyDetailsResolvers from './PolicyDetails/resolvers';\nimport reportsResolvers from './Reports/resolvers';\nimport authResolvers from './Auth/resolvers';\n\n//typedefs\nimport searchPoliciesSchema from './SearchPolicies/schema.graphql';\nimport policyDetailsSchema from './PolicyDetails/schema.graphql';\nimport reportsSchema from './Reports/schema.graphql';\nimport authSchema from './Auth/schema.graphql';\n\nexport const mergedResolvers = {\n  searchPoliciesResolvers,\n  policyDetailsResolvers,\n  reportsResolvers,\n  authResolvers,\n};\n\nexport const mergedSchema = {\n  searchPoliciesSchema,\n  policyDetailsSchema,\n  reportsSchema,\n  authSchema,\n};\n","export const makePath = (path: string, proxyPath?: string): string => {\n  if (proxyPath) {\n    return `${proxyPath}/${path}`;\n  }\n\n  return `${path}`;\n};\n\nexport const api = {\n  gql: {\n    searchPolicies: `${process.env.API}/rent-guarantee/api/v1/admin/searchPolicies`,\n    history: `${process.env.API}/rent-guarantee/api/v1/admin/getActionLogs`,\n    policySearchTypes: `${process.env.API}/rent-guarantee/api/v1/admin/getPolicySearchTypes`,\n    expandedPolicyDetails: `${process.env.API}/rent-guarantee/api/v1/admin/getExpandedPolicyDetails`,\n    historyForPolicyRelatedActions: `${process.env.API}/rent-guarantee/api/v1/admin/getPolicyActionLogs`,\n    cancelPolicy: `${process.env.API}/rent-guarantee/api/v1/admin/cancelPolicy`,\n    reports: `${process.env.API}/rent-guarantee/api/v1/admin/getReportsDetails`,\n    auth: `${process.env.API}/rent-guarantee/hostedAuth/check`,\n  },\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AAOA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAUA;AACA;AADA;AAIA;AACA;AADA;AAIA;;;;;;;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AADA;AADA;AAKA;AAAA;AAEA;AACA;AACA;AACA;AAZA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAmBA;;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAEA;AACA;AADA;;;;;;;;;;;;;ACFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AACA;AACA;AAJA;;;;;;;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AADA;;;;A","sourceRoot":""}